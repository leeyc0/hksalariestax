(function(){"use strict";var e={8692:function(e,t,a){a(3792),a(3362),a(9085),a(9391);var l=a(3751),n=a(7891),r=a(8676),i=(a(8940),a(2953),a(641)),o=a(33),s={id:"version"},u={id:"formLayout"},d={id:"autocalculate",class:"border"},h={id:"taxpayerform",class:"border"},c=["value","onChange"],p=["value"],x=["onClick"],v=["onClick"],k=["value","onChange"],m=["value","onChange"],b=["value","onChange"],L={class:"flex"},g={key:0},y={id:"parentform",class:"border"},f=["value","onChange"],P=["onChange"],w=["selected"],T=["selected"],A=["selected"],Y=["selected"],C=["selected"],R=["onClick"],N={class:"flex"},M=["name","checked","onChange"],_=["checked","onChange"];function I(e,t,a,n,I,$){var B=(0,i.g2)("taxpayer"),D=(0,i.g2)("taxresult");return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[31]||(t[31]=(0,i.Lk)("h1",null,"薪俸稅計算機",-1)),(0,i.Lk)("div",s,[(0,i.eW)(" 根據 "+(0,o.v_)(e.taxYear2)+" 年度財政預算案制定",1),t[7]||(t[7]=(0,i.Lk)("br",null,null,-1)),t[8]||(t[8]=(0,i.Lk)("a",{href:"https://github.com/leeyc0/hksalariestax/wiki"},"使用說明",-1)),t[9]||(t[9]=(0,i.eW)()),t[10]||(t[10]=(0,i.Lk)("a",{href:"https://github.com/leeyc0/hksalariestax/"},"Source code",-1))]),(0,i.Lk)("div",u,[(0,i.Lk)("div",d,[t[15]||(t[15]=(0,i.eW)(" 自動分配免稅額專用選項 ")),(0,i.Lk)("table",null,[(0,i.Lk)("tr",null,[t[11]||(t[11]=(0,i.Lk)("td",null,"受供養健全兄弟姊妹總數",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=t=>e.totalSiblings=t)},null,512),[[l.Jo,e.totalSiblings,void 0,{number:!0}]])])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[t[12]||(t[12]=(0,i.eW)("受供養健全兄弟姊妹總數")),t[13]||(t[13]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)("（"+(0,o.v_)(e.taxYear2)+"年度失去資格）",1)]),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=t=>e.totalSiblings18=t)},null,512),[[l.Jo,e.totalSiblings18,void 0,{number:!0}]])])]),(0,i.Lk)("tr",null,[t[14]||(t[14]=(0,i.Lk)("td",null,"受供養傷殘兄弟姊妹總數",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=t=>e.totalDisabledSiblings=t)},null,512),[[l.Jo,e.totalDisabledSiblings,void 0,{number:!0}]])])])]),(0,i.Lk)("button",{type:"button",onClick:t[3]||(t[3]=function(){return $.autocalculate&&$.autocalculate(...arguments)})},"自動分配免稅額")]),(0,i.Lk)("div",h,[t[24]||(t[24]=(0,i.eW)(" 納稅人 ")),(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=function(){return $.addTaxPayer&&$.addTaxPayer(...arguments)})},"新增"),(0,i.Lk)("button",{type:"button",onClick:t[5]||(t[5]=e=>$.computeTax())},"全部計算"),t[25]||(t[25]=(0,i.Lk)("br",null,null,-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.taxPayerMap,(a=>{var l=(0,r.A)(a,2),n=l[0],s=l[1];return(0,i.uX)(),(0,i.CE)("div",{key:n,class:"taxPayerInput"},[(0,i.Lk)("div",null,[(0,i.Lk)("input",{size:"12",value:s.name,onChange:t=>e.changeTaxPayerProp({i:n,prop:"name",val:t.target.value})},null,40,c),t[16]||(t[16]=(0,i.Lk)("br",null,null,-1)),t[17]||(t[17]=(0,i.eW)(" 稅款 ")),(0,i.Lk)("input",{size:"10",readonly:"",value:void 0===e.taxPayerResult.get(n)?"0":$.formatNumber(e.taxPayerResult.get(n).taxPayable)},null,8,p),(0,i.Lk)("button",{type:"button",onClick:e=>$.showTaxPayerModal(n)},"填寫報稅表",8,x),(0,i.Lk)("button",{type:"button",onClick:e=>$.deleteTaxPayer(n)},"刪除",8,v),t[18]||(t[18]=(0,i.Lk)("br",null,null,-1)),t[19]||(t[19]=(0,i.eW)(" 健全兄弟姊妹 ")),(0,i.Lk)("input",{value:s.siblings,onChange:t=>e.changeTaxPayerProp({i:n,prop:"siblings",val:parseInt(t.target.value)}),type:"number",min:"0"},null,40,k),t[20]||(t[20]=(0,i.eW)(" 傷殘兄弟姊妹 ")),(0,i.Lk)("input",{value:s.disabledSiblings,onChange:t=>e.changeTaxPayerProp({i:n,prop:"disabledSiblings",val:parseInt(t.target.value)}),type:"number",min:"0"},null,40,m),t[21]||(t[21]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)(" 健全兄弟姊妹（"+(0,o.v_)(e.$root.taxYear2)+"年度年滿） ",1),(0,i.Lk)("input",{value:s.siblings18,onChange:t=>e.changeTaxPayerProp({i:n,prop:"siblings18",val:parseInt(t.target.value)}),type:"number",min:"0"},null,40,b),t[22]||(t[22]=(0,i.Lk)("br",null,null,-1)),t[23]||(t[23]=(0,i.eW)(" 父母免稅額 ")),(0,i.Lk)("div",L,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.parentsClaimedByTaxpayer.get(n),(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"parentTag"},(0,o.v_)(e.name),1)))),128)),0===e.parentsClaimedByTaxpayer.get(n).length?((0,i.uX)(),(0,i.CE)("div",g," （無） ")):(0,i.Q3)("",!0)])])])})),128))]),(0,i.Lk)("div",y,[t[29]||(t[29]=(0,i.eW)(" 受供養父母 ")),(0,i.Lk)("button",{type:"button",onClick:t[6]||(t[6]=function(){return e.addParent&&e.addParent(...arguments)})},"新增"),t[30]||(t[30]=(0,i.Lk)("br",null,null,-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.parentMap,(a=>{var l=(0,r.A)(a,2),n=l[0],s=l[1];return(0,i.uX)(),(0,i.CE)("div",{key:n,class:"parentInput"},[(0,i.Lk)("div",null,[(0,i.Lk)("input",{value:s.name,onChange:t=>e.changeParentProp({i:n,prop:"name",val:t.target.value})},null,40,f),(0,i.Lk)("select",{onChange:t=>e.changeParentProp({i:n,prop:"age",val:parseInt(t.target.value)})},[(0,i.Lk)("option",{value:0,selected:0===s.age},"傷殘——不論年齡",8,w),t[26]||(t[26]=(0,i.Lk)("optgroup",{label:"以下選項均非傷殘人士"},null,-1)),(0,i.Lk)("option",{value:1,selected:1===s.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿54歲",9,T),(0,i.Lk)("option",{value:2,selected:2===s.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿55歲",9,A),(0,i.Lk)("option",{value:3,selected:3===s.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿59歲",9,Y),(0,i.Lk)("option",{value:4,selected:4===s.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿60歲",9,C)],40,P),(0,i.Lk)("button",{type:"button",onClick:t=>e.deleteParent(n)},"刪除",8,R),t[27]||(t[27]=(0,i.Lk)("br",null,null,-1))]),(0,i.Lk)("div",N,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.taxPayerMap,(e=>{var a=(0,r.A)(e,2),l=a[0],u=a[1];return(0,i.uX)(),(0,i.CE)("div",{key:l},[(0,i.Lk)("label",null,[(0,i.Lk)("input",{type:"radio",name:"parent".concat(n),checked:s.claimedBy===l,onChange:e=>$.setParentClaimedBy(n,l)},null,40,M),(0,i.eW)(" "+(0,o.v_)(u.name),1)]),(0,i.Lk)("label",null,[(0,i.Lk)("input",{type:"checkbox",checked:s.livingTogether.get(l),onChange:e=>$.setParentLivingTogether(e,n,l)},null,40,_),t[28]||(t[28]=(0,i.eW)(" 全年同住 "))])])})),128))])])})),128))])]),void 0!==e.taxPayerMap.get(e.showTaxPayerIndex)?((0,i.uX)(),(0,i.Wv)(B,{key:0,ref:"taxpayer","tax-payer":e.taxPayerMap.get(e.showTaxPayerIndex),index:e.showTaxPayerIndex,onShowTaxResult:$.showTaxResult,onOpened:$.taxpayerOpen,onBeforeClose:$.taxpayerClose},null,8,["tax-payer","index","onShowTaxResult","onOpened","onBeforeClose"])):(0,i.Q3)("",!0),void 0!==e.taxPayerResult.get(e.showTaxPayerIndex)?((0,i.uX)(),(0,i.Wv)(D,{key:1,ref:"taxresult","tax-result":e.taxPayerResult.get(e.showTaxPayerIndex),index:e.showTaxPayerIndex,onOpened:$.taxresultOpen,onBeforeClose:$.taxresultClose},null,8,["tax-result","index","onOpened","onBeforeClose"])):(0,i.Q3)("",!0)],64)}var $=a(3604),B=a(9201),D=(a(6033),a(6278));a(4114),a(2712),a(8111),a(8237);class S{constructor(e){var t=e.progressiveRate,a=e.stdRate,l=e.basicAllowance,n=e.marriedAllowance,r=e.mpfMax,i=e.mpfMaxMultiplier,o=e.parentAllowance,s=e.parentAdditionalAllowance,u=e.parentAllowance55,d=e.parentAdditionalAllowance55,h=e.siblingAllowance,c=e.disabledDependentAllowance,p=e.childAllowance,x=e.newbornChildAdditionalAllowance,v=e.singleParentAllowance,k=e.personalDisabilityAllowance,m=e.provisionalYear;this.progressiveRate=t,this.stdRate=a,this.basicAllowance=l,this.marriedAllowance=n,this.mpfMax=r,this.mpfMaxMultiplier=i,this.parentAllowance=o,this.parentAdditionalAllowance=s,this.parentAllowance55=u,this.parentAdditionalAllowance55=d,this.siblingAllowance=h,this.disabledDependentAllowance=c,this.childAllowance=p,this.newbornChildAdditionalAllowance=x,this.singleParentAllowance=v,this.personalDisabilityAllowance=k,this.provisionalYear=m}calculateMpfDeduction(e){var t=Math.floor(e.mpf*this.mpfMaxMultiplier),a=this.mpfMax;return 1===e.martialStatus&&(a*=2),t>a&&(t=a),t}calculateParentAllowance(e){var t=0,a={livingTogether:0,nonLivingTogether:0,livingTogether55:0,nonLivingTogether55:0};return this.provisionalYear?e.reduce((function(e,t){switch(t.age){case 0:case 3:case 4:t.livingTogether?e.livingTogether++:e.nonLivingTogether++;break;case 1:case 2:t.livingTogether?e.livingTogether55++:e.nonLivingTogether55++;break}return e}),a):e.reduce((function(e,t){switch(t.age){case 0:case 4:t.livingTogether?e.livingTogether++:e.nonLivingTogether++;break;case 2:case 3:t.livingTogether?e.livingTogether55++:e.nonLivingTogether55++;break}return e}),a),t+=(a.livingTogether+a.nonLivingTogether)*this.parentAllowance,t+=a.livingTogether*this.parentAdditionalAllowance,t+=(a.livingTogether55+a.nonLivingTogether55)*this.parentAllowance55,t+=a.livingTogether55*this.parentAdditionalAllowance55,t}calculateSiblingAllowance(e){var t=0;return t=this.provisionalYear?e.siblings+e.disabledSiblings:e.siblings+e.disabledSiblings+e.siblings18,this.siblingAllowance*t}calculateDisabledDependentAllowance(e,t){var a=e.disabledSiblings+e.otherDisabledDependants;return a+=t.reduce((function(e,t){return 0===t.age?(e++,e):e}),0),this.disabledDependentAllowance*a}calculateChildAllowanceAndSingleParentAllowance(e){var t=0,a=0;this.provisionalYear?(t=e.children+e.newbornChildrenThisYear+e.newbornChildrenNextYear,a=e.newbornChildrenNextYear):(t=e.children+e.children18+e.newbornChildrenThisYear,a=e.newbornChildrenThisYear),a>9&&(a=9),t>9&&(t=9);var l=this.childAllowance*t+this.newbornChildAdditionalAllowance*a,n=0;return l>0&&(this.provisionalYear?2!==e.martialStatus&&3!==e.martialStatus||(n=this.singleParentAllowance):3===e.martialStatus&&(n=this.singleParentAllowance)),{childAllowance:l,singleParentAllowance:n}}calculateTax(e,t){var a=this.provisionalYear?e.otherDeductionsNextYear:e.otherDeductionsThisYear,l=this.calculateMpfDeduction(e),n=1!==e.martialStatus?this.basicAllowance:0,r=1===e.martialStatus?this.marriedAllowance:0,i=e.disabledPerson?this.personalDisabilityAllowance:0,o=this.calculateParentAllowance(t),s=this.calculateSiblingAllowance(e),u=this.calculateChildAllowanceAndSingleParentAllowance(e),d=u.childAllowance,h=u.singleParentAllowance,c=this.calculateDisabledDependentAllowance(e,t),p=e.income-l-a-n-r-i-o-s-c-d-h,x=e.income-l-a;p<0&&(p=0),x<0&&(x=0);var v,k=0,m=0,b=[],L=(0,$.A)(this.progressiveRate);try{for(L.s();!(v=L.n()).done;){var g=v.value;if(p<k+g.step){var y=p-k,f=Math.floor(y*g.rate/100);b.push({step:y,rate:g.rate,tax:f}),m+=f;break}k+=g.step;var P=g.step*g.rate/100;b.push({step:g.step,rate:g.rate,tax:P}),m+=P}}catch(I){L.e(I)}finally{L.f()}k=0;var w,T=0,A=[],Y=(0,$.A)(this.stdRate);try{for(Y.s();!(w=Y.n()).done;){var C=w.value;if(x<k+C.step){var R=x-k,N=Math.floor(R*C.rate/100);A.push({step:R,rate:C.rate,tax:N}),T+=N;break}k+=C.step;var M=C.step*C.rate/100;A.push({step:C.step,rate:C.rate,tax:M}),T+=M}}catch(I){Y.e(I)}finally{Y.f()}var _={income:e.income,taxableIncome:p,taxableIncomeStdRate:x,mpf:l,basicAllowance:n,marriedAllowance:r,personalDisabilityAllowance:i,otherDeductions:a,parentAllowance:o,siblingAllowance:s,childAllowance:d,singleParentAllowance:h,disabledDependentAllowance:c,progressiveTaxBreakdown:b,progressiveTax:m,stdRateTaxBreakdown:A,stdRateTax:T};return m<=T?(_.rate="progressiveTax",_.tax=m):(_.rate="stdRateTax",_.tax=T),_}}function E(e){var t=100,a=1500,l=Math.ceil(e*t/100);return l>a&&(l=a),l}function X(e,t){var a=new S({progressiveRate:[{step:5e4,rate:2},{step:5e4,rate:6},{step:5e4,rate:10},{step:5e4,rate:14},{step:1/0,rate:17}],stdRate:[{step:5e6,rate:15},{step:1/0,rate:16}],basicAllowance:132e3,marriedAllowance:264e3,mpfMax:18e3,mpfMaxMultiplier:1,parentAllowance:5e4,parentAdditionalAllowance:5e4,parentAllowance55:25e3,parentAdditionalAllowance55:25e3,siblingAllowance:37500,disabledDependentAllowance:75e3,childAllowance:13e4,singleParentAllowance:132e3,newbornChildAdditionalAllowance:13e4,personalDisabilityAllowance:75e3,provisionalYear:!1}),l=new S({progressiveRate:[{step:5e4,rate:2},{step:5e4,rate:6},{step:5e4,rate:10},{step:5e4,rate:14},{step:1/0,rate:17}],stdRate:[{step:5e6,rate:15},{step:1/0,rate:16}],basicAllowance:132e3,marriedAllowance:264e3,mpfMax:18e3,mpfMaxMultiplier:1,parentAllowance:5e4,parentAdditionalAllowance:5e4,parentAllowance55:25e3,parentAdditionalAllowance55:25e3,siblingAllowance:37500,disabledDependentAllowance:75e3,childAllowance:13e4,singleParentAllowance:132e3,newbornChildAdditionalAllowance:13e4,personalDisabilityAllowance:75e3,provisionalYear:!0}),n=a.calculateTax(e,t),r=l.calculateTax(e,t),i=E(n.tax),o=n.tax-e.provisionalTax-i,s=n.tax-e.provisionalTax-i+r.tax;return{taxThisYear:n,taxThisYearFinal:o,taxNextYearProvisional:r,taxThisYearProvisional:e.provisionalTax,rebate:i,taxPayable:s}}var W={TaxRule:S,taxRebate:E,taxPayable:X},O=a(4048),V=(a(3609),(0,O.A)().mark(F)),U=(0,O.A)().mark(K);function F(e,t){var a,l,n,r,i,o,s,u,d,h,c;return(0,O.A)().wrap((function(p){while(1)switch(p.prev=p.next){case 0:a=0,l=e.length,n=t.length,r=n**l;case 4:if(!(a<r)){p.next=14;break}i=new Map,o=(0,$.A)(t);try{for(o.s();!(s=o.n()).done;)u=s.value,i.set(u,[])}catch(x){o.e(x)}finally{o.f()}for(d=0;d<l;d++)h=Math.floor(a/n**d)%n,c=t[h],i.get(c).unshift(e[l-1-d]);return a++,p.next=12,i;case 12:p.next=4;break;case 14:case"end":return p.stop()}}),V)}function K(e,t){var a,l,n,r,i,o,s;return(0,O.A)().wrap((function(u){while(1)switch(u.prev=u.next){case 0:a=0,l=0,n=t.length,r=new Map,i=(0,$.A)(t);try{for(i.s();!(o=i.n()).done;)s=o.value,r.set(s,0)}catch(d){i.e(d)}finally{i.f()}r.set(t[0],e);case 7:return u.next=10,r;case 10:if(r.get(t[n-1])!==e){u.next=12;break}return u.abrupt("break",15);case 12:if(l===n-1){do{l--}while(0===r.get(t[l]));a===l?(r.set(t[a],r.get(t[a])-1),a++,l=a,r.set(t[a],r.get(t[n-1])+1),a!==n-1&&r.set(t[n-1],0)):(r.set(t[l],r.get(t[l])-1),l++,r.set(t[l],r.get(t[n-1])+1),l!==n-1&&r.set(t[n-1],0))}else r.set(t[l],r.get(t[l])-1),l++,r.set(t[l],r.get(t[l])+1);u.next=7;break;case 15:case"end":return u.stop()}}),U)}var z={distinglishableBallInBoxes:F,indistinglishableBallInBoxes:K};function J(){var e,t=[],a=[],l=this.$store.state,n=null,i=1/0,o=(0,$.A)(l.parentMap.keys());try{for(o.s();!(e=o.n()).done;){var s=e.value;t.push(s)}}catch(H){o.e(H)}finally{o.f()}var u,d=(0,$.A)(l.taxPayerMap.keys());try{for(d.s();!(u=d.n()).done;){var h=u.value;a.push(h)}}catch(H){d.e(H)}finally{d.f()}var c,p=(0,$.A)(z.distinglishableBallInBoxes(t,a));try{for(p.s();!(c=p.n()).done;){var x,v=c.value,k=(0,$.A)(z.indistinglishableBallInBoxes(this.totalSiblings,a));try{for(k.s();!(x=k.n()).done;){var m,b=x.value,L=(0,$.A)(z.indistinglishableBallInBoxes(this.totalSiblings18,a));try{for(L.s();!(m=L.n()).done;){var g,y=m.value,f=(0,$.A)(z.indistinglishableBallInBoxes(this.totalDisabledSiblings,a));try{for(f.s();!(g=f.n()).done;){var P=g.value,w=0,T=Object.assign({},l);T.parentMap=new Map(l.parentMap),T.taxPayerMap=new Map(l.taxPayerMap);var A,Y=(0,$.A)(l.parentMap);try{for(Y.s();!(A=Y.n()).done;){var C=(0,r.A)(A.value,2),R=C[0],N=C[1];T.parentMap.set(R,Object.assign({},N))}}catch(H){Y.e(H)}finally{Y.f()}var M,_=new Map,I=(0,$.A)(l.taxPayerMap.keys());try{for(I.s();!(M=I.n()).done;){var B=M.value;_.set(B,[]);var D,S=(0,$.A)(v.get(B));try{for(S.s();!(D=S.n()).done;){var E=D.value,X=T.parentMap.get(E),O=_.get(B);X.claimedBy=B,O.push({id:E,name:X.name,age:X.age,livingTogether:X.livingTogether.get(X.claimedBy)}),_.set(X.claimedBy,O)}}catch(H){S.e(H)}finally{S.f()}}}catch(H){I.e(H)}finally{I.f()}var V,U=(0,$.A)(l.taxPayerMap);try{for(U.s();!(V=U.n()).done;){var F=(0,r.A)(V.value,2),K=F[0],J=F[1],j=Object.assign({},J);T.taxPayerMap.set(K,j),j.siblings=b.get(K),j.siblings18=y.get(K),j.disabledSiblings=P.get(K);var Q=W.taxPayable(j,_.get(K));w+=Q.taxPayable}}catch(H){U.e(H)}finally{U.f()}w<i&&(i=w,n=T),console.log({totalTax:w,parentCombo:new Map(v),siblingCombo:new Map(b),sibling18Combo:new Map(y),disabledSiblingCombo:new Map(P)})}}catch(H){f.e(H)}finally{f.f()}}}catch(H){L.e(H)}finally{L.f()}}}catch(H){k.e(H)}finally{k.f()}}}catch(H){p.e(H)}finally{p.f()}this.$store.replaceState(n),this.computeTax()}var j={value:2},Q={value:3},H={class:"comment",title:"請參閱上年稅單暫繳稅項目"},q=["checked","onChange"],G=["checked","onChange"];function Z(e,t,a,n,s,u){var d=(0,i.g2)("vue-final-modal");return(0,i.uX)(),(0,i.Wv)(d,{name:"taxPayerModal",modelValue:e.show,"onUpdate:modelValue":t[18]||(t[18]=t=>e.show=t),"esc-to-close":!0,classes:"modal-container","content-class":"modal-content"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.Lk)("table",null,[(0,i.Lk)("tr",null,[t[19]||(t[19]=(0,i.Lk)("td",null,"納稅人",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.name=e)},null,512),[[l.Jo,u.name,void 0,{lazy:!0}]])])]),(0,i.Lk)("tr",null,[t[20]||(t[20]=(0,i.Lk)("td",null,"傷殘納稅人",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.disabledPerson=e),type:"checkbox"},null,512),[[l.lH,u.disabledPerson,void 0,{lazy:!0}]])])]),(0,i.Lk)("tr",null,[t[23]||(t[23]=(0,i.Lk)("td",null,"夫婦合併評稅/單親",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>u.martialStatus=e)},[t[21]||(t[21]=(0,i.Lk)("option",{value:0},"單身或夫婦分別評稅",-1)),t[22]||(t[22]=(0,i.Lk)("option",{value:1},"夫婦合併評稅",-1)),(0,i.Lk)("option",j,"於"+(0,o.v_)(e.$root.taxYear1)+"課稅年度開始單親",1),(0,i.Lk)("option",Q,"於整個"+(0,o.v_)(e.$root.taxYear1)+"課稅年度單親",1)],512),[[l.u1,u.martialStatus,void 0,{lazy:!0,number:!0}]])])]),(0,i.Lk)("tr",null,[t[24]||(t[24]=(0,i.Lk)("td",null,"總入息",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>u.income=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,u.income,void 0,{lazy:!0}]])])]),(0,i.Lk)("tr",null,[t[25]||(t[25]=(0,i.Lk)("td",null,[(0,i.Lk)("span",{class:"comment",title:"報稅表申報項目位於「第4部薪俸稅 → 4.3 扣除 → (4)以僱員身分付給認可退休計劃的強制性供款」"},"強積金/認可退休計劃僱員供款")],-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>u.mpf=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,u.mpf,void 0,{lazy:!0}]])])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"適用於"+(0,o.v_)(e.$root.taxYear1)+"年度的其他扣除項目",1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>u.otherDeductionsThisYear=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,u.otherDeductionsThisYear,void 0,{lazy:!0}]])])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"適用於"+(0,o.v_)(e.$root.taxYear2)+"年度的其他扣除項目",1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>u.otherDeductionsNextYear=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,u.otherDeductionsNextYear,void 0,{lazy:!0}]])])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[(0,i.Lk)("span",H,(0,o.v_)(e.$root.taxYear1)+"年度暫繳稅實額",1)]),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>u.provisionalTax=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,u.provisionalTax,void 0,{lazy:!0}]])])]),(0,i.Lk)("tr",null,[t[28]||(t[28]=(0,i.Lk)("td",null,"受供養父母/祖父母/外祖父母",-1)),(0,i.Lk)("td",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$root.parentMap,(e=>{var l=(0,r.A)(e,2),n=l[0],s=l[1];return(0,i.uX)(),(0,i.CE)("div",{key:n},[(0,i.eW)((0,o.v_)(s.name)+" ",1),(0,i.Lk)("label",null,[(0,i.Lk)("input",{type:"radio",checked:s.claimedBy===a.index,onChange:e=>u.setParentClaimedBy(n)},null,40,q),t[26]||(t[26]=(0,i.eW)("申索"))]),(0,i.Lk)("label",null,[(0,i.Lk)("input",{type:"checkbox",checked:s.livingTogether.get(a.index),onChange:e=>u.setParentLivingTogether(e,n)},null,40,G),t[27]||(t[27]=(0,i.eW)("全年同住"))])])})),128))])]),(0,i.Lk)("tr",null,[t[31]||(t[31]=(0,i.Lk)("td",null,"受供養兄弟姊妹數目",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>u.siblings=e),type:"number",min:"0"},null,512),[[l.Jo,u.siblings,void 0,{lazy:!0,number:!0}]]),t[29]||(t[29]=(0,i.eW)("健全  ")),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>u.disabledSiblings=e),type:"number",min:"0"},null,512),[[l.Jo,u.disabledSiblings,void 0,{lazy:!0,number:!0}]]),t[30]||(t[30]=(0,i.eW)("傷殘 "))])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[t[32]||(t[32]=(0,i.eW)("受供養健全兄弟姊妹數目")),t[33]||(t[33]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)("（"+(0,o.v_)(e.$root.taxYear2)+"年度失去資格）",1)]),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>u.siblings18=e),type:"number",min:"0"},null,512),[[l.Jo,u.siblings18,void 0,{lazy:!0,number:!0}]])])]),(0,i.Lk)("tr",null,[t[34]||(t[34]=(0,i.Lk)("td",null,"子女數目（不包括新生子女）",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>u.children=e),type:"number",min:"0"},null,512),[[l.Jo,u.children,void 0,{lazy:!0,number:!0}]])])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[t[35]||(t[35]=(0,i.eW)("子女數目")),t[36]||(t[36]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)("（"+(0,o.v_)(e.$root.taxYear2)+"年度失去資格）",1)]),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>u.children18=e),type:"number",min:"0"},null,512),[[l.Jo,u.children18,void 0,{lazy:!0,number:!0}]])])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,(0,o.v_)(e.$root.taxYear1)+"年度新生子女數目",1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>u.newbornChildrenThisYear=e),type:"number",min:"0"},null,512),[[l.Jo,u.newbornChildrenThisYear,void 0,{lazy:!0,number:!0}]])])]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,(0,o.v_)(e.$root.taxYear2)+"年度新生子女數目",1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>u.newbornChildrenNextYear=e),type:"number",min:"0"},null,512),[[l.Jo,u.newbornChildrenNextYear,void 0,{lazy:!0,number:!0}]])])]),(0,i.Lk)("tr",null,[t[37]||(t[37]=(0,i.Lk)("td",null,"受供養傷殘配偶及子女數目",-1)),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>u.otherDisabledDependants=e),type:"number",min:"0"},null,512),[[l.Jo,u.otherDisabledDependants,void 0,{lazy:!0,number:!0}]])])])]),(0,i.Lk)("button",{type:"button",onClick:t[16]||(t[16]=t=>e.$emit("showTaxResult"))},"計算稅款"),(0,i.Lk)("button",{type:"button",onClick:t[17]||(t[17]=e=>u.disableModalMethod())},"關閉")])])),_:1},8,["modelValue"])}a(7495),a(5440);var ee=new Intl.NumberFormat;function te(e){return parseInt(e.replace(/,/g,""))}var ae={props:["taxPayer","index"],data:()=>({show:!1}),emits:["showTaxResult"],computed:{name:{get(){return this.taxPayer.name},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"name",val:e})}},disabledPerson:{get(){return this.taxPayer.disabledPerson},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"disabledPerson",val:e})}},martialStatus:{get(){return this.taxPayer.martialStatus},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"martialStatus",val:e})}},income:{get(){return ee.format(this.taxPayer.income)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"income",val:te(e)})}},mpf:{get(){return ee.format(this.taxPayer.mpf)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"mpf",val:te(e)})}},otherDeductionsThisYear:{get(){return ee.format(this.taxPayer.otherDeductionsThisYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"otherDeductionsThisYear",val:te(e)})}},otherDeductionsNextYear:{get(){return ee.format(this.taxPayer.otherDeductionsNextYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"otherDeductionsNextYear",val:te(e)})}},provisionalTax:{get(){return ee.format(this.taxPayer.provisionalTax)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"provisionalTax",val:te(e)})}},siblings:{get(){return ee.format(this.taxPayer.siblings)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"siblings",val:e})}},siblings18:{get(){return ee.format(this.taxPayer.siblings18)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"siblings18",val:e})}},disabledSiblings:{get(){return ee.format(this.taxPayer.disabledSiblings)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"disabledSiblings",val:e})}},children:{get(){return ee.format(this.taxPayer.children)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"children",val:e})}},children18:{get(){return ee.format(this.taxPayer.children18)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"children18",val:e})}},newbornChildrenThisYear:{get(){return ee.format(this.taxPayer.newbornChildrenThisYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"newbornChildrenThisYear",val:e})}},newbornChildrenNextYear:{get(){return ee.format(this.taxPayer.newbornChildrenNextYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"newbornChildrenNextYear",val:e})}},otherDisabledDependants:{get(){return ee.format(this.taxPayer.otherDisabledDependants)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"otherDisabledDependants",val:e})}}},methods:{disableModalMethod(){this.$vfm.hide("taxPayerModal")},setParentClaimedBy(e){this.$store.commit("setParentClaimedBy",{parentId:e,taxPayerId:this.index})},setParentLivingTogether(e,t){this.$store.commit("setParentLivingTogether",{parentId:t,taxPayerId:this.index,livingTogether:e.target.checked})}}},le=a(6262);const ne=(0,le.A)(ae,[["render",Z],["__scopeId","data-v-70063562"]]);var re=ne,ie={class:"taxResultRoot"},oe={class:"border taxResult"},se={colspan:"2"},ue={class:"beforeline"},de={class:"beforeline"},he={colspan:"2",class:"line"},ce={class:"border taxResult"},pe={colspan:"2"},xe={class:"beforeline"},ve={class:"beforeline"},ke={colspan:"2",class:"line"},me={class:"taxPayable"},be={class:"button"};function Le(e,t,a,l,n,r){var s=(0,i.g2)("vue-final-modal");return(0,i.uX)(),(0,i.Wv)(s,{name:"taxResultModal",modelValue:e.show,"onUpdate:modelValue":t[2]||(t[2]=t=>e.show=t),"esc-to-close":!0,classes:"modal-container","content-class":"modal-content taxResultModalWidth"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",ie,[(0,i.Lk)("div",oe,[(0,i.Lk)("table",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",se,(0,o.v_)(e.$root.taxYear1)+"年度",1)]),t[24]||(t[24]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2"},"累進稅率")],-1)),(0,i.Lk)("tr",null,[t[3]||(t[3]=(0,i.Lk)("td",null,"總入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.income)),1)]),(0,i.Lk)("tr",null,[t[4]||(t[4]=(0,i.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.mpf)),1)]),(0,i.Lk)("tr",null,[t[5]||(t[5]=(0,i.Lk)("td",null,"減：其他扣除項目",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.otherDeductions)),1)]),(0,i.Lk)("tr",null,[t[6]||(t[6]=(0,i.Lk)("td",null,"減：基本免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.basicAllowance)),1)]),(0,i.Lk)("tr",null,[t[7]||(t[7]=(0,i.Lk)("td",null,"減：已婚人士免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.marriedAllowance)),1)]),(0,i.Lk)("tr",null,[t[8]||(t[8]=(0,i.Lk)("td",null,"減：供養父母/祖父母/外祖父母免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.parentAllowance)),1)]),(0,i.Lk)("tr",null,[t[9]||(t[9]=(0,i.Lk)("td",null,"減：供養兄弟姊妹免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.siblingAllowance|r.formatNumber)),1)]),(0,i.Lk)("tr",null,[t[10]||(t[10]=(0,i.Lk)("td",null,"減：子女免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.childAllowance)),1)]),(0,i.Lk)("tr",null,[t[11]||(t[11]=(0,i.Lk)("td",null,"減：單親免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.singleParentAllowance)),1)]),(0,i.Lk)("tr",null,[t[12]||(t[12]=(0,i.Lk)("td",null,"減：傷殘受養人免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.disabledDependentAllowance)),1)]),(0,i.Lk)("tr",null,[t[13]||(t[13]=(0,i.Lk)("td",null,"減：傷殘人士免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.personalDisabilityAllowance)),1)]),(0,i.Lk)("tr",null,[t[14]||(t[14]=(0,i.Lk)("td",null,"應課稅入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.taxableIncome)),1)]),t[25]||(t[25]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2"},"累進稅率稅款計算")],-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.taxResult.taxThisYear.progressiveTaxBreakdown,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:t},[(0,i.Lk)("td",null,(0,o.v_)(r.progressiveTaxPrefix(t,a.taxResult.taxThisYear.progressiveTaxBreakdown)+r.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(e.tax)),1)])))),128)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.progressiveThisYearExtraLines,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e},t[15]||(t[15]=[(0,i.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,i.Lk)("tr",null,[t[16]||(t[16]=(0,i.Lk)("th",{class:"beforeline"},"按累進稅率計算之稅款：",-1)),(0,i.Lk)("th",ue,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.progressiveTax)),1)]),t[26]||(t[26]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2",class:"line"},"標準稅率")],-1)),(0,i.Lk)("tr",null,[t[17]||(t[17]=(0,i.Lk)("td",null,"總入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.income)),1)]),(0,i.Lk)("tr",null,[t[18]||(t[18]=(0,i.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.mpf)),1)]),(0,i.Lk)("tr",null,[t[19]||(t[19]=(0,i.Lk)("td",null,"減：其他扣除項目",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.otherDeductions)),1)]),(0,i.Lk)("tr",null,[t[20]||(t[20]=(0,i.Lk)("td",null,"應課稅入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.taxableIncomeStdRate)),1)]),t[27]||(t[27]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2"},"標準稅率稅款計算")],-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.taxResult.taxThisYear.stdRateTaxBreakdown,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:t},[(0,i.Lk)("td",null,(0,o.v_)(r.progressiveTaxPrefix(t,a.taxResult.taxThisYear.stdRateTaxBreakdown)+r.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(e.tax)),1)])))),128)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.stdRateThisYearExtraLines,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e},t[21]||(t[21]=[(0,i.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,i.Lk)("tr",null,[t[22]||(t[22]=(0,i.Lk)("th",{class:"beforeline"},"按標準稅率計算之稅款：",-1)),(0,i.Lk)("th",de,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.stdRateTax)),1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("th",he,(0,o.v_)(e.$root.taxYear1)+"年度最終稅款",1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"適用稅率："+(0,o.v_)("progressiveTax"==a.taxResult.taxThisYear.rate?"累進稅率":"標準稅率"),1),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYear.tax)),1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"減："+(0,o.v_)(e.$root.taxYear1)+"年度暫繳稅實額",1),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYearProvisional)),1)]),(0,i.Lk)("tr",null,[t[23]||(t[23]=(0,i.Lk)("td",null,"減：稅務寬減",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.rebate)),1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,(0,o.v_)(e.$root.taxYear1)+"年度最終稅款",1),(0,i.Lk)("th",null,(0,o.v_)(r.formatNumber(a.taxResult.taxThisYearFinal)),1)])])]),(0,i.Lk)("div",ce,[(0,i.Lk)("table",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",pe,(0,o.v_)(e.$root.taxYear2)+"年度",1)]),t[48]||(t[48]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2"},"累進稅率")],-1)),(0,i.Lk)("tr",null,[t[28]||(t[28]=(0,i.Lk)("td",null,"總入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.income)),1)]),(0,i.Lk)("tr",null,[t[29]||(t[29]=(0,i.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.mpf)),1)]),(0,i.Lk)("tr",null,[t[30]||(t[30]=(0,i.Lk)("td",null,"減：其他扣除項目",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.otherDeductions)),1)]),(0,i.Lk)("tr",null,[t[31]||(t[31]=(0,i.Lk)("td",null,"減：基本免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.basicAllowance)),1)]),(0,i.Lk)("tr",null,[t[32]||(t[32]=(0,i.Lk)("td",null,"減：已婚人士免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.marriedAllowance)),1)]),(0,i.Lk)("tr",null,[t[33]||(t[33]=(0,i.Lk)("td",null,"減：供養父母/祖父母/外祖父母免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.parentAllowance)),1)]),(0,i.Lk)("tr",null,[t[34]||(t[34]=(0,i.Lk)("td",null,"減：供養兄弟姊妹免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.siblingAllowance|r.formatNumber)),1)]),(0,i.Lk)("tr",null,[t[35]||(t[35]=(0,i.Lk)("td",null,"減：子女免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.childAllowance)),1)]),(0,i.Lk)("tr",null,[t[36]||(t[36]=(0,i.Lk)("td",null,"減：單親免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.singleParentAllowance)),1)]),(0,i.Lk)("tr",null,[t[37]||(t[37]=(0,i.Lk)("td",null,"減：傷殘受養人免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.disabledDependentAllowance)),1)]),(0,i.Lk)("tr",null,[t[38]||(t[38]=(0,i.Lk)("td",null,"減：傷殘人士免稅額",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.personalDisabilityAllowance)),1)]),(0,i.Lk)("tr",null,[t[39]||(t[39]=(0,i.Lk)("td",null,"應課稅入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.taxableIncome)),1)]),t[49]||(t[49]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2"},"累進稅率稅款計算")],-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.taxResult.taxNextYearProvisional.progressiveTaxBreakdown,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:t},[(0,i.Lk)("td",null,(0,o.v_)(r.progressiveTaxPrefix(t,a.taxResult.taxNextYearProvisional.progressiveTaxBreakdown)+r.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(e.tax)),1)])))),128)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.progressiveNextYearExtraLines,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e},t[40]||(t[40]=[(0,i.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,i.Lk)("tr",null,[t[41]||(t[41]=(0,i.Lk)("th",{class:"beforeline"},"按累進稅率計算之稅款：",-1)),(0,i.Lk)("th",xe,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.progressiveTax)),1)]),t[50]||(t[50]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2",class:"line"},"標準稅率")],-1)),(0,i.Lk)("tr",null,[t[42]||(t[42]=(0,i.Lk)("td",null,"總入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.income)),1)]),(0,i.Lk)("tr",null,[t[43]||(t[43]=(0,i.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.mpf)),1)]),(0,i.Lk)("tr",null,[t[44]||(t[44]=(0,i.Lk)("td",null,"減：其他扣除項目",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.otherDeductions)),1)]),(0,i.Lk)("tr",null,[t[45]||(t[45]=(0,i.Lk)("td",null,"應課稅入息",-1)),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.taxableIncomeStdRate)),1)]),t[51]||(t[51]=(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2"},"標準稅率稅款計算")],-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.taxResult.taxNextYearProvisional.stdRateTaxBreakdown,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:t},[(0,i.Lk)("td",null,(0,o.v_)(r.progressiveTaxPrefix(t,a.taxResult.taxNextYearProvisional.stdRateTaxBreakdown)+r.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(e.tax)),1)])))),128)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.stdRateNextYearExtraLines,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e},t[46]||(t[46]=[(0,i.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,i.Lk)("tr",null,[t[47]||(t[47]=(0,i.Lk)("th",{class:"beforeline"},"按標準稅率計算之稅款：",-1)),(0,i.Lk)("th",ve,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.stdRateTax)),1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("th",ke,(0,o.v_)(e.$root.taxYear1)+"年度暫繳稅",1)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"適用稅率："+(0,o.v_)("progressiveTax"==a.taxResult.taxNextYearProvisional.rate?"累進稅率":"標準稅率"),1),(0,i.Lk)("td",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.tax)),1)]),t[52]||(t[52]=(0,i.Lk)("tr",null,[(0,i.Lk)("td",null," "),(0,i.Lk)("td",null," ")],-1)),t[53]||(t[53]=(0,i.Lk)("tr",null,[(0,i.Lk)("td",null," "),(0,i.Lk)("td",null," ")],-1)),(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,(0,o.v_)(e.$root.taxYear2)+"年度暫繳稅",1),(0,i.Lk)("th",null,(0,o.v_)(r.formatNumber(a.taxResult.taxNextYearProvisional.tax)),1)])])]),(0,i.Lk)("div",me," 總稅款："+(0,o.v_)(r.formatNumber(a.taxResult.taxPayable)),1),(0,i.Lk)("div",be,[(0,i.Lk)("button",{type:"button",onClick:t[0]||(t[0]=e=>r.back())},t[54]||(t[54]=[(0,i.eW)("返回報稅表 ("),(0,i.Lk)("span",{style:{"text-decoration":"underline"}},"Backspace",-1),(0,i.eW)(")")])),(0,i.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>r.disableModalMethod())},"關閉")])])])),_:1},8,["modelValue"])}var ge=new Intl.NumberFormat,ye={props:["taxResult"],data:()=>({show:!1}),computed:{progressiveThisYearExtraLines(){var e=this.taxResult.taxNextYearProvisional.progressiveTaxBreakdown.length-this.taxResult.taxThisYear.progressiveTaxBreakdown.length;return e<0?0:e},progressiveNextYearExtraLines(){var e=this.taxResult.taxThisYear.progressiveTaxBreakdown.length-this.taxResult.taxNextYearProvisional.progressiveTaxBreakdown.length;return e<0?0:e},stdRateThisYearExtraLines(){var e=this.taxResult.taxNextYearProvisional.stdRateTaxBreakdown.length-this.taxResult.taxThisYear.stdRateTaxBreakdown.length;return e<0?0:e},stdRateNextYearExtraLines(){var e=this.taxResult.taxThisYear.stdRateTaxBreakdown.length-this.taxResult.taxNextYearProvisional.stdRateTaxBreakdown.length;return e<0?0:e}},methods:{back(){this.$vfm.hide("taxResultModal"),this.$vfm.show("taxPayerModal")},disableModalMethod(){this.$vfm.hide("taxResultModal")},progressiveTaxPrefix(e,t){return 1===t.length?"全數":0===e?"首":e===t.length-1?"餘":"次"},formatNumber:e=>ge.format(e)}};const fe=(0,le.A)(ye,[["render",Le],["__scopeId","data-v-6c6e627b"]]);var Pe=fe,we=new Intl.NumberFormat,Te={name:"TaxCalculator",data:()=>({taxYear1:"2024/25",taxYear2:"2025/26",showTaxPayerIndex:1,taxPayerResult:new Map,totalSiblings:0,totalSiblings18:0,totalDisabledSiblings:0}),computed:(0,B.A)((0,B.A)({},(0,D.aH)(["taxPayerMap","parentMap"])),(0,D.L8)(["parentsClaimedByTaxpayer"])),components:{taxpayer:re,taxresult:Pe},created(){this.computeTax()},methods:(0,B.A)((0,B.A)({showTaxPayerModal(e){this.showTaxPayerIndex=e,this.$vfm.show("taxPayerModal")},disableModalMethod(){this.showTaxPayerIndex=NaN}},(0,D.PY)(["addParent","deleteParent","changeTaxPayerProp","changeParentProp"])),{},{addTaxPayer(){this.$store.commit("addTaxPayer"),isNaN(this.showTaxPayerIndex)&&(this.showTaxPayerIndex=this.taxPayerMap.keys().next().value,this.computeTax()),this.computeTax()},deleteTaxPayer(e){if(this.$store.commit("deleteTaxPayer",e),this.taxPayerResult.delete(e),e===this.showTaxPayerIndex){var t=this.taxPayerMap.keys().next();t.done?this.showTaxPayerIndex=NaN:(this.computeTax(),this.showTaxPayerIndex=t.value)}},computeTax(){var e,t=this.$store.getters.parentsClaimedByTaxpayer,a=(0,$.A)(this.taxPayerMap.keys());try{for(a.s();!(e=a.n()).done;){var l=e.value,n=W.taxPayable(this.taxPayerMap.get(l),t.get(l));this.taxPayerResult.set(l,n)}}catch(r){a.e(r)}finally{a.f()}},showTaxResult(){this.computeTax(),this.$vfm.hide("taxPayerModal"),this.$vfm.show("taxResultModal")},setParentClaimedBy(e,t){this.$store.commit("setParentClaimedBy",{parentId:e,taxPayerId:t})},setParentLivingTogether(e,t,a){this.$store.commit("setParentLivingTogether",{parentId:t,taxPayerId:a,livingTogether:e.target.checked})},taxpayerOpenKeydownListener(e){"Enter"===e.key&&(document.activeElement.dispatchEvent(new Event("change")),this.showTaxResult())},taxresultOpenKeydownListener(e){"Backspace"===e.key&&(this.$vfm.hide("taxResultModal"),this.$vfm.show("taxPayerModal"))},taxpayerOpen(){this.$refs.taxpayer.$el.addEventListener("keydown",this.taxpayerOpenKeydownListener)},taxpayerClose(){this.$refs.taxpayer.$el.removeEventListener("keydown",this.taxpayerOpenKeydownListener)},taxresultOpen(){this.$refs.taxresult.$el.addEventListener("keydown",this.taxresultOpenKeydownListener)},taxresultClose(){this.$refs.taxresult.$el.removeEventListener("keydown",this.taxresultOpenKeydownListener)},formatNumber:e=>we.format(e),autocalculate:J})};const Ae=(0,le.A)(Te,[["render",I],["__scopeId","data-v-759e4593"]]);var Ye=Ae;class Ce{constructor(e){this.name=e,this.martialStatus=0,this.income=0,this.mpf=0,this.otherDeductionsThisYear=0,this.otherDeductionsNextYear=0,this.siblings=0,this.siblings18=0,this.disabledSiblings=0,this.children=0,this.children18=0,this.newbornChildrenThisYear=0,this.newbornChildrenNextYear=0,this.otherDisabledDependants=0,this.provisionalTax=0,this.disabledPerson=!1}}class Re{constructor(e,t){this.name=e,this.age=1,this.livingTogether=new Map,this.claimedBy=t}}var Ne=(0,D.y$)({state:{taxPayerMap:new Map([[1,new Ce("納稅人1")]]),taxPayerCounter:1,parentMap:new Map,parentCounter:0},getters:{parentsClaimedByTaxpayer(e){var t,a=new Map,l=(0,$.A)(e.taxPayerMap.keys());try{for(l.s();!(t=l.n()).done;){var n=t.value;a.set(n,[])}}catch(c){l.e(c)}finally{l.f()}var i,o=(0,$.A)(e.parentMap);try{for(o.s();!(i=o.n()).done;){var s=(0,r.A)(i.value,2),u=s[0],d=s[1],h=a.get(d.claimedBy);h.push({id:u,name:d.name,age:d.age,livingTogether:d.livingTogether.get(d.claimedBy)}),a.set(d.claimedBy,h)}}catch(c){o.e(c)}finally{o.f()}return a}},mutations:{addTaxPayer(e){e.taxPayerCounter++,e.taxPayerMap.set(e.taxPayerCounter,new Ce("納稅人".concat(e.taxPayerCounter)));var t,a=e.taxPayerMap.keys().next().value,l=(0,$.A)(e.parentMap.values());try{for(l.s();!(t=l.n()).done;){var n=t.value;void 0===n.claimedBy&&(n.claimedBy=a),n.livingTogether.set(e.taxPayerCounter,!1)}}catch(r){l.e(r)}finally{l.f()}},deleteTaxPayer(e,t){e.taxPayerMap.delete(t);var a,l=e.taxPayerMap.keys().next().value,n=(0,$.A)(e.parentMap.values());try{for(n.s();!(a=n.n()).done;){var r=a.value;r.claimedBy=l,r.livingTogether.delete(t)}}catch(i){n.e(i)}finally{n.f()}},changeTaxPayerProp(e,t){var a=t.i,l=t.prop,n=t.val;e.taxPayerMap.get(a)[l]=n},addParent(e){var t=e.taxPayerMap.keys().next().value;e.parentCounter++;var a,l=new Re("父母".concat(e.parentCounter),t),n=(0,$.A)(e.taxPayerMap.keys());try{for(n.s();!(a=n.n()).done;){var r=a.value;l.livingTogether.set(r,!1)}}catch(i){n.e(i)}finally{n.f()}e.parentMap.set(e.parentCounter,l)},deleteParent(e,t){e.parentMap.delete(t)},changeParentProp(e,t){var a=t.i,l=t.prop,n=t.val;e.parentMap.get(a)[l]=n},setParentClaimedBy(e,t){var a=t.parentId,l=t.taxPayerId;e.parentMap.get(a).claimedBy=l},setParentLivingTogether(e,t){var a=t.parentId,l=t.taxPayerId,n=t.livingTogether;e.parentMap.get(a).livingTogether.set(l,n)}},actions:{},modules:{}});(0,l.Ef)(Ye).use(Ne).use((0,n.Ay)()).mount("#app")}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,r){if(!l){var i=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],r=e[d][2];for(var o=!0,s=0;s<l.length;s++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](l[s])}))?l.splice(s--,1):(o=!1,r<i&&(i=r));if(o){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[l,n,r]}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,r,i=l[0],o=l[1],s=l[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(s)var d=s(a)}for(t&&t(l);u<i.length;u++)r=i[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},l=self["webpackChunkhksalariestax"]=self["webpackChunkhksalariestax"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(8692)}));l=a.O(l)})();
//# sourceMappingURL=app-legacy.8b3946a0.js.map