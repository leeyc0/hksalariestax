(function(){"use strict";var e={8692:function(e,t,a){a(3792),a(3362),a(9085),a(9391);var l=a(3751),n=a(7891),r=(a(8940),a(2953),a(641)),o=a(33);const i={id:"version"},s={id:"formLayout"},u={id:"autocalculate",class:"border"},d={id:"taxpayerform",class:"border"},c=["value","onChange"],p=["value"],x=["onClick"],h=["onClick"],k=["value","onChange"],m=["value","onChange"],v=["value","onChange"],b={class:"flex"},L={key:0},g={id:"parentform",class:"border"},y=["value","onChange"],f=["onChange"],P=["selected"],w=["selected"],T=["selected"],Y=["selected"],A=["selected"],C=["onClick"],R={class:"flex"},N=["name","checked","onChange"],M=["checked","onChange"];function _(e,t,a,n,_,I){const $=(0,r.g2)("taxpayer"),B=(0,r.g2)("taxresult");return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[31]||(t[31]=(0,r.Lk)("h1",null,"薪俸稅計算機",-1)),(0,r.Lk)("div",i,[(0,r.eW)(" 根據 "+(0,o.v_)(e.taxYear2)+" 年度財政預算案制定",1),t[7]||(t[7]=(0,r.Lk)("br",null,null,-1)),t[8]||(t[8]=(0,r.Lk)("a",{href:"https://github.com/leeyc0/hksalariestax/wiki"},"使用說明",-1)),t[9]||(t[9]=(0,r.eW)()),t[10]||(t[10]=(0,r.Lk)("a",{href:"https://github.com/leeyc0/hksalariestax/"},"Source code",-1))]),(0,r.Lk)("div",s,[(0,r.Lk)("div",u,[t[15]||(t[15]=(0,r.eW)(" 自動分配免稅額專用選項 ")),(0,r.Lk)("table",null,[(0,r.Lk)("tr",null,[t[11]||(t[11]=(0,r.Lk)("td",null,"受供養健全兄弟姊妹總數",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=t=>e.totalSiblings=t)},null,512),[[l.Jo,e.totalSiblings,void 0,{number:!0}]])])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,[t[12]||(t[12]=(0,r.eW)("受供養健全兄弟姊妹總數")),t[13]||(t[13]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)("（"+(0,o.v_)(e.taxYear2)+"年度失去資格）",1)]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=t=>e.totalSiblings18=t)},null,512),[[l.Jo,e.totalSiblings18,void 0,{number:!0}]])])]),(0,r.Lk)("tr",null,[t[14]||(t[14]=(0,r.Lk)("td",null,"受供養傷殘兄弟姊妹總數",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=t=>e.totalDisabledSiblings=t)},null,512),[[l.Jo,e.totalDisabledSiblings,void 0,{number:!0}]])])])]),(0,r.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>I.autocalculate&&I.autocalculate(...e))},"自動分配免稅額")]),(0,r.Lk)("div",d,[t[24]||(t[24]=(0,r.eW)(" 納稅人 ")),(0,r.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>I.addTaxPayer&&I.addTaxPayer(...e))},"新增"),(0,r.Lk)("button",{type:"button",onClick:t[5]||(t[5]=e=>I.computeTax())},"全部計算"),t[25]||(t[25]=(0,r.Lk)("br",null,null,-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.taxPayerMap,(([a,l])=>((0,r.uX)(),(0,r.CE)("div",{key:a,class:"taxPayerInput"},[(0,r.Lk)("div",null,[(0,r.Lk)("input",{size:"12",value:l.name,onChange:t=>e.changeTaxPayerProp({i:a,prop:"name",val:t.target.value})},null,40,c),t[16]||(t[16]=(0,r.Lk)("br",null,null,-1)),t[17]||(t[17]=(0,r.eW)(" 稅款 ")),(0,r.Lk)("input",{size:"10",readonly:"",value:void 0===e.taxPayerResult.get(a)?"0":I.formatNumber(e.taxPayerResult.get(a).taxPayable)},null,8,p),(0,r.Lk)("button",{type:"button",onClick:e=>I.showTaxPayerModal(a)},"填寫報稅表",8,x),(0,r.Lk)("button",{type:"button",onClick:e=>I.deleteTaxPayer(a)},"刪除",8,h),t[18]||(t[18]=(0,r.Lk)("br",null,null,-1)),t[19]||(t[19]=(0,r.eW)(" 健全兄弟姊妹 ")),(0,r.Lk)("input",{value:l.siblings,onChange:t=>e.changeTaxPayerProp({i:a,prop:"siblings",val:parseInt(t.target.value)}),type:"number",min:"0"},null,40,k),t[20]||(t[20]=(0,r.eW)(" 傷殘兄弟姊妹 ")),(0,r.Lk)("input",{value:l.disabledSiblings,onChange:t=>e.changeTaxPayerProp({i:a,prop:"disabledSiblings",val:parseInt(t.target.value)}),type:"number",min:"0"},null,40,m),t[21]||(t[21]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)(" 健全兄弟姊妹（"+(0,o.v_)(e.$root.taxYear2)+"年度年滿） ",1),(0,r.Lk)("input",{value:l.siblings18,onChange:t=>e.changeTaxPayerProp({i:a,prop:"siblings18",val:parseInt(t.target.value)}),type:"number",min:"0"},null,40,v),t[22]||(t[22]=(0,r.Lk)("br",null,null,-1)),t[23]||(t[23]=(0,r.eW)(" 父母免稅額 ")),(0,r.Lk)("div",b,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.parentsClaimedByTaxpayer.get(a),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"parentTag"},(0,o.v_)(e.name),1)))),128)),0===e.parentsClaimedByTaxpayer.get(a).length?((0,r.uX)(),(0,r.CE)("div",L," （無） ")):(0,r.Q3)("",!0)])])])))),128))]),(0,r.Lk)("div",g,[t[29]||(t[29]=(0,r.eW)(" 受供養父母 ")),(0,r.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...t)=>e.addParent&&e.addParent(...t))},"新增"),t[30]||(t[30]=(0,r.Lk)("br",null,null,-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.parentMap,(([a,l])=>((0,r.uX)(),(0,r.CE)("div",{key:a,class:"parentInput"},[(0,r.Lk)("div",null,[(0,r.Lk)("input",{value:l.name,onChange:t=>e.changeParentProp({i:a,prop:"name",val:t.target.value})},null,40,y),(0,r.Lk)("select",{onChange:t=>e.changeParentProp({i:a,prop:"age",val:parseInt(t.target.value)})},[(0,r.Lk)("option",{value:0,selected:0===l.age},"傷殘——不論年齡",8,P),t[26]||(t[26]=(0,r.Lk)("optgroup",{label:"以下選項均非傷殘人士"},null,-1)),(0,r.Lk)("option",{value:1,selected:1===l.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿54歲",9,w),(0,r.Lk)("option",{value:2,selected:2===l.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿55歲",9,T),(0,r.Lk)("option",{value:3,selected:3===l.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿59歲",9,Y),(0,r.Lk)("option",{value:4,selected:4===l.age},"於"+(0,o.v_)(e.taxYear1)+"年度滿60歲",9,A)],40,f),(0,r.Lk)("button",{type:"button",onClick:t=>e.deleteParent(a)},"刪除",8,C),t[27]||(t[27]=(0,r.Lk)("br",null,null,-1))]),(0,r.Lk)("div",R,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.taxPayerMap,(([e,n])=>((0,r.uX)(),(0,r.CE)("div",{key:e},[(0,r.Lk)("label",null,[(0,r.Lk)("input",{type:"radio",name:"parent".concat(a),checked:l.claimedBy===e,onChange:t=>I.setParentClaimedBy(a,e)},null,40,N),(0,r.eW)(" "+(0,o.v_)(n.name),1)]),(0,r.Lk)("label",null,[(0,r.Lk)("input",{type:"checkbox",checked:l.livingTogether.get(e),onChange:t=>I.setParentLivingTogether(t,a,e)},null,40,M),t[28]||(t[28]=(0,r.eW)(" 全年同住 "))])])))),128))])])))),128))])]),void 0!==e.taxPayerMap.get(e.showTaxPayerIndex)?((0,r.uX)(),(0,r.Wv)($,{key:0,ref:"taxpayer","tax-payer":e.taxPayerMap.get(e.showTaxPayerIndex),index:e.showTaxPayerIndex,onShowTaxResult:I.showTaxResult,onOpened:I.taxpayerOpen,onBeforeClose:I.taxpayerClose},null,8,["tax-payer","index","onShowTaxResult","onOpened","onBeforeClose"])):(0,r.Q3)("",!0),void 0!==e.taxPayerResult.get(e.showTaxPayerIndex)?((0,r.uX)(),(0,r.Wv)(B,{key:1,ref:"taxresult","tax-result":e.taxPayerResult.get(e.showTaxPayerIndex),index:e.showTaxPayerIndex,onOpened:I.taxresultOpen,onBeforeClose:I.taxresultClose},null,8,["tax-result","index","onOpened","onBeforeClose"])):(0,r.Q3)("",!0)],64)}var I=a(8788),$=a(6278);a(4114),a(2712),a(8111),a(8237);class B{constructor({progressiveRate:e,stdRate:t,basicAllowance:a,marriedAllowance:l,mpfMax:n,mpfMaxMultiplier:r,parentAllowance:o,parentAdditionalAllowance:i,parentAllowance55:s,parentAdditionalAllowance55:u,siblingAllowance:d,disabledDependentAllowance:c,childAllowance:p,newbornChildAdditionalAllowance:x,singleParentAllowance:h,personalDisabilityAllowance:k,provisionalYear:m}){this.progressiveRate=e,this.stdRate=t,this.basicAllowance=a,this.marriedAllowance=l,this.mpfMax=n,this.mpfMaxMultiplier=r,this.parentAllowance=o,this.parentAdditionalAllowance=i,this.parentAllowance55=s,this.parentAdditionalAllowance55=u,this.siblingAllowance=d,this.disabledDependentAllowance=c,this.childAllowance=p,this.newbornChildAdditionalAllowance=x,this.singleParentAllowance=h,this.personalDisabilityAllowance=k,this.provisionalYear=m}calculateMpfDeduction(e){let t=Math.floor(e.mpf*this.mpfMaxMultiplier),a=this.mpfMax;return 1===e.martialStatus&&(a*=2),t>a&&(t=a),t}calculateParentAllowance(e){let t=0;const a={livingTogether:0,nonLivingTogether:0,livingTogether55:0,nonLivingTogether55:0};return this.provisionalYear?e.reduce((function(e,t){switch(t.age){case 0:case 3:case 4:t.livingTogether?e.livingTogether++:e.nonLivingTogether++;break;case 1:case 2:t.livingTogether?e.livingTogether55++:e.nonLivingTogether55++;break}return e}),a):e.reduce((function(e,t){switch(t.age){case 0:case 4:t.livingTogether?e.livingTogether++:e.nonLivingTogether++;break;case 2:case 3:t.livingTogether?e.livingTogether55++:e.nonLivingTogether55++;break}return e}),a),t+=(a.livingTogether+a.nonLivingTogether)*this.parentAllowance,t+=a.livingTogether*this.parentAdditionalAllowance,t+=(a.livingTogether55+a.nonLivingTogether55)*this.parentAllowance55,t+=a.livingTogether55*this.parentAdditionalAllowance55,t}calculateSiblingAllowance(e){let t=0;return t=this.provisionalYear?e.siblings+e.disabledSiblings:e.siblings+e.disabledSiblings+e.siblings18,this.siblingAllowance*t}calculateDisabledDependentAllowance(e,t){let a=e.disabledSiblings+e.otherDisabledDependants;return a+=t.reduce((function(e,t){return 0===t.age?(e++,e):e}),0),this.disabledDependentAllowance*a}calculateChildAllowanceAndSingleParentAllowance(e){let t=0,a=0;this.provisionalYear?(t=e.children+e.newbornChildrenThisYear+e.newbornChildrenNextYear,a=e.newbornChildrenNextYear):(t=e.children+e.children18+e.newbornChildrenThisYear,a=e.newbornChildrenThisYear),a>9&&(a=9),t>9&&(t=9);const l=this.childAllowance*t+this.newbornChildAdditionalAllowance*a;let n=0;return l>0&&(this.provisionalYear?2!==e.martialStatus&&3!==e.martialStatus||(n=this.singleParentAllowance):3===e.martialStatus&&(n=this.singleParentAllowance)),{childAllowance:l,singleParentAllowance:n}}calculateTax(e,t){const a=this.provisionalYear?e.otherDeductionsNextYear:e.otherDeductionsThisYear,l=this.calculateMpfDeduction(e),n=1!==e.martialStatus?this.basicAllowance:0,r=1===e.martialStatus?this.marriedAllowance:0,o=e.disabledPerson?this.personalDisabilityAllowance:0,i=this.calculateParentAllowance(t),s=this.calculateSiblingAllowance(e),{childAllowance:u,singleParentAllowance:d}=this.calculateChildAllowanceAndSingleParentAllowance(e),c=this.calculateDisabledDependentAllowance(e,t);let p=e.income-l-a-n-r-o-i-s-c-u-d,x=e.income-l-a;p<0&&(p=0),x<0&&(x=0);let h=0,k=0;const m=[];for(const g of this.progressiveRate){if(p<h+g.step){const e=p-h,t=Math.floor(e*g.rate/100);m.push({step:e,rate:g.rate,tax:t}),k+=t;break}{h+=g.step;const e=g.step*g.rate/100;m.push({step:g.step,rate:g.rate,tax:e}),k+=e}}h=0;let v=0;const b=[];for(const g of this.stdRate){if(x<h+g.step){const e=x-h,t=Math.floor(e*g.rate/100);b.push({step:e,rate:g.rate,tax:t}),v+=t;break}{h+=g.step;const e=g.step*g.rate/100;b.push({step:g.step,rate:g.rate,tax:e}),v+=e}}const L={income:e.income,taxableIncome:p,taxableIncomeStdRate:x,mpf:l,basicAllowance:n,marriedAllowance:r,personalDisabilityAllowance:o,otherDeductions:a,parentAllowance:i,siblingAllowance:s,childAllowance:u,singleParentAllowance:d,disabledDependentAllowance:c,progressiveTaxBreakdown:m,progressiveTax:k,stdRateTaxBreakdown:b,stdRateTax:v};return k<=v?(L.rate="progressiveTax",L.tax=k):(L.rate="stdRateTax",L.tax=v),L}}function D(e){const t=100,a=1500;let l=Math.ceil(e*t/100);return l>a&&(l=a),l}function S(e,t){const a=new B({progressiveRate:[{step:5e4,rate:2},{step:5e4,rate:6},{step:5e4,rate:10},{step:5e4,rate:14},{step:1/0,rate:17}],stdRate:[{step:5e6,rate:15},{step:1/0,rate:16}],basicAllowance:132e3,marriedAllowance:264e3,mpfMax:18e3,mpfMaxMultiplier:1,parentAllowance:5e4,parentAdditionalAllowance:5e4,parentAllowance55:25e3,parentAdditionalAllowance55:25e3,siblingAllowance:37500,disabledDependentAllowance:75e3,childAllowance:13e4,singleParentAllowance:132e3,newbornChildAdditionalAllowance:13e4,personalDisabilityAllowance:75e3,provisionalYear:!1}),l=new B({progressiveRate:[{step:5e4,rate:2},{step:5e4,rate:6},{step:5e4,rate:10},{step:5e4,rate:14},{step:1/0,rate:17}],stdRate:[{step:5e6,rate:15},{step:1/0,rate:16}],basicAllowance:132e3,marriedAllowance:264e3,mpfMax:18e3,mpfMaxMultiplier:1,parentAllowance:5e4,parentAdditionalAllowance:5e4,parentAllowance55:25e3,parentAdditionalAllowance55:25e3,siblingAllowance:37500,disabledDependentAllowance:75e3,childAllowance:13e4,singleParentAllowance:132e3,newbornChildAdditionalAllowance:13e4,personalDisabilityAllowance:75e3,provisionalYear:!0}),n=a.calculateTax(e,t),r=l.calculateTax(e,t),o=D(n.tax),i=n.tax-e.provisionalTax-o,s=n.tax-e.provisionalTax-o+r.tax;return{taxThisYear:n,taxThisYearFinal:i,taxNextYearProvisional:r,taxThisYearProvisional:e.provisionalTax,rebate:o,taxPayable:s}}var E={TaxRule:B,taxRebate:D,taxPayable:S};a(3609);function*X(e,t){let a=0;const l=e.length,n=t.length,r=n**l;while(a<r){const r=new Map;for(const e of t)r.set(e,[]);for(let o=0;o<l;o++){const i=Math.floor(a/n**o)%n,s=t[i];r.get(s).unshift(e[l-1-o])}a++,yield r}}function*W(e,t){let a=0,l=0;const n=t.length,r=new Map;for(const o of t)r.set(o,0);r.set(t[0],e);while(1){if(yield r,r.get(t[n-1])===e)break;if(l===n-1){do{l--}while(0===r.get(t[l]));a===l?(r.set(t[a],r.get(t[a])-1),a++,l=a,r.set(t[a],r.get(t[n-1])+1),a!==n-1&&r.set(t[n-1],0)):(r.set(t[l],r.get(t[l])-1),l++,r.set(t[l],r.get(t[n-1])+1),l!==n-1&&r.set(t[n-1],0))}else r.set(t[l],r.get(t[l])-1),l++,r.set(t[l],r.get(t[l])+1)}}var O={distinglishableBallInBoxes:X,indistinglishableBallInBoxes:W};function V(){const e=[],t=[],a=this.$store.state;let l=null,n=1/0;for(const r of a.parentMap.keys())e.push(r);for(const r of a.taxPayerMap.keys())t.push(r);for(const r of O.distinglishableBallInBoxes(e,t))for(const e of O.indistinglishableBallInBoxes(this.totalSiblings,t))for(const o of O.indistinglishableBallInBoxes(this.totalSiblings18,t))for(const i of O.indistinglishableBallInBoxes(this.totalDisabledSiblings,t)){let t=0;const s=Object.assign({},a);s.parentMap=new Map(a.parentMap),s.taxPayerMap=new Map(a.taxPayerMap);for(const[e,l]of a.parentMap)s.parentMap.set(e,Object.assign({},l));const u=new Map;for(const e of a.taxPayerMap.keys()){u.set(e,[]);for(const t of r.get(e)){const a=s.parentMap.get(t),l=u.get(e);a.claimedBy=e,l.push({id:t,name:a.name,age:a.age,livingTogether:a.livingTogether.get(a.claimedBy)}),u.set(a.claimedBy,l)}}for(const[l,n]of a.taxPayerMap){const a=Object.assign({},n);s.taxPayerMap.set(l,a),a.siblings=e.get(l),a.siblings18=o.get(l),a.disabledSiblings=i.get(l);const r=E.taxPayable(a,u.get(l));t+=r.taxPayable}t<n&&(n=t,l=s),console.log({totalTax:t,parentCombo:new Map(r),siblingCombo:new Map(e),sibling18Combo:new Map(o),disabledSiblingCombo:new Map(i)})}this.$store.replaceState(l),this.computeTax()}const U={value:2},F={value:3},K={class:"comment",title:"請參閱上年稅單暫繳稅項目"},z=["checked","onChange"],J=["checked","onChange"];function j(e,t,a,n,i,s){const u=(0,r.g2)("vue-final-modal");return(0,r.uX)(),(0,r.Wv)(u,{name:"taxPayerModal",modelValue:e.show,"onUpdate:modelValue":t[18]||(t[18]=t=>e.show=t),"esc-to-close":!0,classes:"modal-container","content-class":"modal-content"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",null,[(0,r.Lk)("table",null,[(0,r.Lk)("tr",null,[t[19]||(t[19]=(0,r.Lk)("td",null,"納稅人",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e)},null,512),[[l.Jo,s.name,void 0,{lazy:!0}]])])]),(0,r.Lk)("tr",null,[t[20]||(t[20]=(0,r.Lk)("td",null,"傷殘納稅人",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.disabledPerson=e),type:"checkbox"},null,512),[[l.lH,s.disabledPerson,void 0,{lazy:!0}]])])]),(0,r.Lk)("tr",null,[t[23]||(t[23]=(0,r.Lk)("td",null,"夫婦合併評稅/單親",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.martialStatus=e)},[t[21]||(t[21]=(0,r.Lk)("option",{value:0},"單身或夫婦分別評稅",-1)),t[22]||(t[22]=(0,r.Lk)("option",{value:1},"夫婦合併評稅",-1)),(0,r.Lk)("option",U,"於"+(0,o.v_)(e.$root.taxYear1)+"課稅年度開始單親",1),(0,r.Lk)("option",F,"於整個"+(0,o.v_)(e.$root.taxYear1)+"課稅年度單親",1)],512),[[l.u1,s.martialStatus,void 0,{lazy:!0,number:!0}]])])]),(0,r.Lk)("tr",null,[t[24]||(t[24]=(0,r.Lk)("td",null,"總入息",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.income=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,s.income,void 0,{lazy:!0}]])])]),(0,r.Lk)("tr",null,[t[25]||(t[25]=(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:"comment",title:"報稅表申報項目位於「第4部薪俸稅 → 4.3 扣除 → (4)以僱員身分付給認可退休計劃的強制性供款」"},"強積金/認可退休計劃僱員供款")],-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.mpf=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,s.mpf,void 0,{lazy:!0}]])])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,"適用於"+(0,o.v_)(e.$root.taxYear1)+"年度的其他扣除項目",1),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.otherDeductionsThisYear=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,s.otherDeductionsThisYear,void 0,{lazy:!0}]])])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,"適用於"+(0,o.v_)(e.$root.taxYear2)+"年度的其他扣除項目",1),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.otherDeductionsNextYear=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,s.otherDeductionsNextYear,void 0,{lazy:!0}]])])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,[(0,r.Lk)("span",K,(0,o.v_)(e.$root.taxYear1)+"年度暫繳稅實額",1)]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.provisionalTax=e),type:"text",pattern:"[0-9,]*[0-9]"},null,512),[[l.Jo,s.provisionalTax,void 0,{lazy:!0}]])])]),(0,r.Lk)("tr",null,[t[28]||(t[28]=(0,r.Lk)("td",null,"受供養父母/祖父母/外祖父母",-1)),(0,r.Lk)("td",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.$root.parentMap,(([e,l])=>((0,r.uX)(),(0,r.CE)("div",{key:e},[(0,r.eW)((0,o.v_)(l.name)+" ",1),(0,r.Lk)("label",null,[(0,r.Lk)("input",{type:"radio",checked:l.claimedBy===a.index,onChange:t=>s.setParentClaimedBy(e)},null,40,z),t[26]||(t[26]=(0,r.eW)("申索"))]),(0,r.Lk)("label",null,[(0,r.Lk)("input",{type:"checkbox",checked:l.livingTogether.get(a.index),onChange:t=>s.setParentLivingTogether(t,e)},null,40,J),t[27]||(t[27]=(0,r.eW)("全年同住"))])])))),128))])]),(0,r.Lk)("tr",null,[t[31]||(t[31]=(0,r.Lk)("td",null,"受供養兄弟姊妹數目",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.siblings=e),type:"number",min:"0"},null,512),[[l.Jo,s.siblings,void 0,{lazy:!0,number:!0}]]),t[29]||(t[29]=(0,r.eW)("健全  ")),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.disabledSiblings=e),type:"number",min:"0"},null,512),[[l.Jo,s.disabledSiblings,void 0,{lazy:!0,number:!0}]]),t[30]||(t[30]=(0,r.eW)("傷殘 "))])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,[t[32]||(t[32]=(0,r.eW)("受供養健全兄弟姊妹數目")),t[33]||(t[33]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)("（"+(0,o.v_)(e.$root.taxYear2)+"年度失去資格）",1)]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>s.siblings18=e),type:"number",min:"0"},null,512),[[l.Jo,s.siblings18,void 0,{lazy:!0,number:!0}]])])]),(0,r.Lk)("tr",null,[t[34]||(t[34]=(0,r.Lk)("td",null,"子女數目（不包括新生子女）",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>s.children=e),type:"number",min:"0"},null,512),[[l.Jo,s.children,void 0,{lazy:!0,number:!0}]])])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,[t[35]||(t[35]=(0,r.eW)("子女數目")),t[36]||(t[36]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)("（"+(0,o.v_)(e.$root.taxYear2)+"年度失去資格）",1)]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>s.children18=e),type:"number",min:"0"},null,512),[[l.Jo,s.children18,void 0,{lazy:!0,number:!0}]])])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,(0,o.v_)(e.$root.taxYear1)+"年度新生子女數目",1),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>s.newbornChildrenThisYear=e),type:"number",min:"0"},null,512),[[l.Jo,s.newbornChildrenThisYear,void 0,{lazy:!0,number:!0}]])])]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,(0,o.v_)(e.$root.taxYear2)+"年度新生子女數目",1),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.newbornChildrenNextYear=e),type:"number",min:"0"},null,512),[[l.Jo,s.newbornChildrenNextYear,void 0,{lazy:!0,number:!0}]])])]),(0,r.Lk)("tr",null,[t[37]||(t[37]=(0,r.Lk)("td",null,"受供養傷殘配偶及子女數目",-1)),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>s.otherDisabledDependants=e),type:"number",min:"0"},null,512),[[l.Jo,s.otherDisabledDependants,void 0,{lazy:!0,number:!0}]])])])]),(0,r.Lk)("button",{type:"button",onClick:t[16]||(t[16]=t=>e.$emit("showTaxResult"))},"計算稅款"),(0,r.Lk)("button",{type:"button",onClick:t[17]||(t[17]=e=>s.disableModalMethod())},"關閉")])])),_:1},8,["modelValue"])}a(7495),a(5440);const Q=new Intl.NumberFormat;function H(e){return parseInt(e.replace(/,/g,""))}var q={props:["taxPayer","index"],data:()=>({show:!1}),emits:["showTaxResult"],computed:{name:{get(){return this.taxPayer.name},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"name",val:e})}},disabledPerson:{get(){return this.taxPayer.disabledPerson},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"disabledPerson",val:e})}},martialStatus:{get(){return this.taxPayer.martialStatus},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"martialStatus",val:e})}},income:{get(){return Q.format(this.taxPayer.income)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"income",val:H(e)})}},mpf:{get(){return Q.format(this.taxPayer.mpf)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"mpf",val:H(e)})}},otherDeductionsThisYear:{get(){return Q.format(this.taxPayer.otherDeductionsThisYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"otherDeductionsThisYear",val:H(e)})}},otherDeductionsNextYear:{get(){return Q.format(this.taxPayer.otherDeductionsNextYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"otherDeductionsNextYear",val:H(e)})}},provisionalTax:{get(){return Q.format(this.taxPayer.provisionalTax)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"provisionalTax",val:H(e)})}},siblings:{get(){return Q.format(this.taxPayer.siblings)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"siblings",val:e})}},siblings18:{get(){return Q.format(this.taxPayer.siblings18)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"siblings18",val:e})}},disabledSiblings:{get(){return Q.format(this.taxPayer.disabledSiblings)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"disabledSiblings",val:e})}},children:{get(){return Q.format(this.taxPayer.children)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"children",val:e})}},children18:{get(){return Q.format(this.taxPayer.children18)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"children18",val:e})}},newbornChildrenThisYear:{get(){return Q.format(this.taxPayer.newbornChildrenThisYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"newbornChildrenThisYear",val:e})}},newbornChildrenNextYear:{get(){return Q.format(this.taxPayer.newbornChildrenNextYear)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"newbornChildrenNextYear",val:e})}},otherDisabledDependants:{get(){return Q.format(this.taxPayer.otherDisabledDependants)},set(e){this.$store.commit("changeTaxPayerProp",{i:this.index,prop:"otherDisabledDependants",val:e})}}},methods:{disableModalMethod(){this.$vfm.hide("taxPayerModal")},setParentClaimedBy(e){this.$store.commit("setParentClaimedBy",{parentId:e,taxPayerId:this.index})},setParentLivingTogether(e,t){this.$store.commit("setParentLivingTogether",{parentId:t,taxPayerId:this.index,livingTogether:e.target.checked})}}},G=a(6262);const Z=(0,G.A)(q,[["render",j],["__scopeId","data-v-70063562"]]);var ee=Z;const te={class:"taxResultRoot"},ae={class:"border taxResult"},le={colspan:"2"},ne={class:"beforeline"},re={class:"beforeline"},oe={colspan:"2",class:"line"},ie={class:"border taxResult"},se={colspan:"2"},ue={class:"beforeline"},de={class:"beforeline"},ce={colspan:"2",class:"line"},pe={class:"taxPayable"},xe={class:"button"};function he(e,t,a,l,n,i){const s=(0,r.g2)("vue-final-modal");return(0,r.uX)(),(0,r.Wv)(s,{name:"taxResultModal",modelValue:e.show,"onUpdate:modelValue":t[2]||(t[2]=t=>e.show=t),"esc-to-close":!0,classes:"modal-container","content-class":"modal-content taxResultModalWidth"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",te,[(0,r.Lk)("div",ae,[(0,r.Lk)("table",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",le,(0,o.v_)(e.$root.taxYear1)+"年度",1)]),t[24]||(t[24]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2"},"累進稅率")],-1)),(0,r.Lk)("tr",null,[t[3]||(t[3]=(0,r.Lk)("td",null,"總入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.income)),1)]),(0,r.Lk)("tr",null,[t[4]||(t[4]=(0,r.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.mpf)),1)]),(0,r.Lk)("tr",null,[t[5]||(t[5]=(0,r.Lk)("td",null,"減：其他扣除項目",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.otherDeductions)),1)]),(0,r.Lk)("tr",null,[t[6]||(t[6]=(0,r.Lk)("td",null,"減：基本免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.basicAllowance)),1)]),(0,r.Lk)("tr",null,[t[7]||(t[7]=(0,r.Lk)("td",null,"減：已婚人士免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.marriedAllowance)),1)]),(0,r.Lk)("tr",null,[t[8]||(t[8]=(0,r.Lk)("td",null,"減：供養父母/祖父母/外祖父母免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.parentAllowance)),1)]),(0,r.Lk)("tr",null,[t[9]||(t[9]=(0,r.Lk)("td",null,"減：供養兄弟姊妹免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.siblingAllowance|i.formatNumber)),1)]),(0,r.Lk)("tr",null,[t[10]||(t[10]=(0,r.Lk)("td",null,"減：子女免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.childAllowance)),1)]),(0,r.Lk)("tr",null,[t[11]||(t[11]=(0,r.Lk)("td",null,"減：單親免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.singleParentAllowance)),1)]),(0,r.Lk)("tr",null,[t[12]||(t[12]=(0,r.Lk)("td",null,"減：傷殘受養人免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.disabledDependentAllowance)),1)]),(0,r.Lk)("tr",null,[t[13]||(t[13]=(0,r.Lk)("td",null,"減：傷殘人士免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.personalDisabilityAllowance)),1)]),(0,r.Lk)("tr",null,[t[14]||(t[14]=(0,r.Lk)("td",null,"應課稅入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.taxableIncome)),1)]),t[25]||(t[25]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2"},"累進稅率稅款計算")],-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.taxResult.taxThisYear.progressiveTaxBreakdown,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,o.v_)(i.progressiveTaxPrefix(t,a.taxResult.taxThisYear.progressiveTaxBreakdown)+i.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(e.tax)),1)])))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.progressiveThisYearExtraLines,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e},t[15]||(t[15]=[(0,r.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,r.Lk)("tr",null,[t[16]||(t[16]=(0,r.Lk)("th",{class:"beforeline"},"按累進稅率計算之稅款：",-1)),(0,r.Lk)("th",ne,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.progressiveTax)),1)]),t[26]||(t[26]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2",class:"line"},"標準稅率")],-1)),(0,r.Lk)("tr",null,[t[17]||(t[17]=(0,r.Lk)("td",null,"總入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.income)),1)]),(0,r.Lk)("tr",null,[t[18]||(t[18]=(0,r.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.mpf)),1)]),(0,r.Lk)("tr",null,[t[19]||(t[19]=(0,r.Lk)("td",null,"減：其他扣除項目",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.otherDeductions)),1)]),(0,r.Lk)("tr",null,[t[20]||(t[20]=(0,r.Lk)("td",null,"應課稅入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.taxableIncomeStdRate)),1)]),t[27]||(t[27]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2"},"標準稅率稅款計算")],-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.taxResult.taxThisYear.stdRateTaxBreakdown,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,o.v_)(i.progressiveTaxPrefix(t,a.taxResult.taxThisYear.stdRateTaxBreakdown)+i.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(e.tax)),1)])))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.stdRateThisYearExtraLines,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e},t[21]||(t[21]=[(0,r.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,r.Lk)("tr",null,[t[22]||(t[22]=(0,r.Lk)("th",{class:"beforeline"},"按標準稅率計算之稅款：",-1)),(0,r.Lk)("th",re,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.stdRateTax)),1)]),(0,r.Lk)("tr",null,[(0,r.Lk)("th",oe,(0,o.v_)(e.$root.taxYear1)+"年度最終稅款",1)]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,"適用稅率："+(0,o.v_)("progressiveTax"==a.taxResult.taxThisYear.rate?"累進稅率":"標準稅率"),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYear.tax)),1)]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,"減："+(0,o.v_)(e.$root.taxYear1)+"年度暫繳稅實額",1),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYearProvisional)),1)]),(0,r.Lk)("tr",null,[t[23]||(t[23]=(0,r.Lk)("td",null,"減：稅務寬減",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.rebate)),1)]),(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,(0,o.v_)(e.$root.taxYear1)+"年度最終稅款",1),(0,r.Lk)("th",null,(0,o.v_)(i.formatNumber(a.taxResult.taxThisYearFinal)),1)])])]),(0,r.Lk)("div",ie,[(0,r.Lk)("table",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",se,(0,o.v_)(e.$root.taxYear2)+"年度",1)]),t[48]||(t[48]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2"},"累進稅率")],-1)),(0,r.Lk)("tr",null,[t[28]||(t[28]=(0,r.Lk)("td",null,"總入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.income)),1)]),(0,r.Lk)("tr",null,[t[29]||(t[29]=(0,r.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.mpf)),1)]),(0,r.Lk)("tr",null,[t[30]||(t[30]=(0,r.Lk)("td",null,"減：其他扣除項目",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.otherDeductions)),1)]),(0,r.Lk)("tr",null,[t[31]||(t[31]=(0,r.Lk)("td",null,"減：基本免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.basicAllowance)),1)]),(0,r.Lk)("tr",null,[t[32]||(t[32]=(0,r.Lk)("td",null,"減：已婚人士免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.marriedAllowance)),1)]),(0,r.Lk)("tr",null,[t[33]||(t[33]=(0,r.Lk)("td",null,"減：供養父母/祖父母/外祖父母免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.parentAllowance)),1)]),(0,r.Lk)("tr",null,[t[34]||(t[34]=(0,r.Lk)("td",null,"減：供養兄弟姊妹免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.siblingAllowance|i.formatNumber)),1)]),(0,r.Lk)("tr",null,[t[35]||(t[35]=(0,r.Lk)("td",null,"減：子女免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.childAllowance)),1)]),(0,r.Lk)("tr",null,[t[36]||(t[36]=(0,r.Lk)("td",null,"減：單親免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.singleParentAllowance)),1)]),(0,r.Lk)("tr",null,[t[37]||(t[37]=(0,r.Lk)("td",null,"減：傷殘受養人免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.disabledDependentAllowance)),1)]),(0,r.Lk)("tr",null,[t[38]||(t[38]=(0,r.Lk)("td",null,"減：傷殘人士免稅額",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.personalDisabilityAllowance)),1)]),(0,r.Lk)("tr",null,[t[39]||(t[39]=(0,r.Lk)("td",null,"應課稅入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.taxableIncome)),1)]),t[49]||(t[49]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2"},"累進稅率稅款計算")],-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.taxResult.taxNextYearProvisional.progressiveTaxBreakdown,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,o.v_)(i.progressiveTaxPrefix(t,a.taxResult.taxNextYearProvisional.progressiveTaxBreakdown)+i.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(e.tax)),1)])))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.progressiveNextYearExtraLines,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e},t[40]||(t[40]=[(0,r.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,r.Lk)("tr",null,[t[41]||(t[41]=(0,r.Lk)("th",{class:"beforeline"},"按累進稅率計算之稅款：",-1)),(0,r.Lk)("th",ue,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.progressiveTax)),1)]),t[50]||(t[50]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2",class:"line"},"標準稅率")],-1)),(0,r.Lk)("tr",null,[t[42]||(t[42]=(0,r.Lk)("td",null,"總入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.income)),1)]),(0,r.Lk)("tr",null,[t[43]||(t[43]=(0,r.Lk)("td",null,"減：扣除項目：強積金僱員供款",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.mpf)),1)]),(0,r.Lk)("tr",null,[t[44]||(t[44]=(0,r.Lk)("td",null,"減：其他扣除項目",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.otherDeductions)),1)]),(0,r.Lk)("tr",null,[t[45]||(t[45]=(0,r.Lk)("td",null,"應課稅入息",-1)),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.taxableIncomeStdRate)),1)]),t[51]||(t[51]=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{colspan:"2"},"標準稅率稅款計算")],-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.taxResult.taxNextYearProvisional.stdRateTaxBreakdown,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,o.v_)(i.progressiveTaxPrefix(t,a.taxResult.taxNextYearProvisional.stdRateTaxBreakdown)+i.formatNumber(e.step))+"@"+(0,o.v_)(e.rate+"%"),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(e.tax)),1)])))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.stdRateNextYearExtraLines,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e},t[46]||(t[46]=[(0,r.Lk)("td",{colspan:"2"}," ",-1)]))))),128)),(0,r.Lk)("tr",null,[t[47]||(t[47]=(0,r.Lk)("th",{class:"beforeline"},"按標準稅率計算之稅款：",-1)),(0,r.Lk)("th",de,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.stdRateTax)),1)]),(0,r.Lk)("tr",null,[(0,r.Lk)("th",ce,(0,o.v_)(e.$root.taxYear1)+"年度暫繳稅",1)]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,"適用稅率："+(0,o.v_)("progressiveTax"==a.taxResult.taxNextYearProvisional.rate?"累進稅率":"標準稅率"),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.tax)),1)]),t[52]||(t[52]=(0,r.Lk)("tr",null,[(0,r.Lk)("td",null," "),(0,r.Lk)("td",null," ")],-1)),t[53]||(t[53]=(0,r.Lk)("tr",null,[(0,r.Lk)("td",null," "),(0,r.Lk)("td",null," ")],-1)),(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,(0,o.v_)(e.$root.taxYear2)+"年度暫繳稅",1),(0,r.Lk)("th",null,(0,o.v_)(i.formatNumber(a.taxResult.taxNextYearProvisional.tax)),1)])])]),(0,r.Lk)("div",pe," 總稅款："+(0,o.v_)(i.formatNumber(a.taxResult.taxPayable)),1),(0,r.Lk)("div",xe,[(0,r.Lk)("button",{type:"button",onClick:t[0]||(t[0]=e=>i.back())},t[54]||(t[54]=[(0,r.eW)("返回報稅表 ("),(0,r.Lk)("span",{style:{"text-decoration":"underline"}},"Backspace",-1),(0,r.eW)(")")])),(0,r.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>i.disableModalMethod())},"關閉")])])])),_:1},8,["modelValue"])}const ke=new Intl.NumberFormat;var me={props:["taxResult"],data:()=>({show:!1}),computed:{progressiveThisYearExtraLines(){const e=this.taxResult.taxNextYearProvisional.progressiveTaxBreakdown.length-this.taxResult.taxThisYear.progressiveTaxBreakdown.length;return e<0?0:e},progressiveNextYearExtraLines(){const e=this.taxResult.taxThisYear.progressiveTaxBreakdown.length-this.taxResult.taxNextYearProvisional.progressiveTaxBreakdown.length;return e<0?0:e},stdRateThisYearExtraLines(){const e=this.taxResult.taxNextYearProvisional.stdRateTaxBreakdown.length-this.taxResult.taxThisYear.stdRateTaxBreakdown.length;return e<0?0:e},stdRateNextYearExtraLines(){const e=this.taxResult.taxThisYear.stdRateTaxBreakdown.length-this.taxResult.taxNextYearProvisional.stdRateTaxBreakdown.length;return e<0?0:e}},methods:{back(){this.$vfm.hide("taxResultModal"),this.$vfm.show("taxPayerModal")},disableModalMethod(){this.$vfm.hide("taxResultModal")},progressiveTaxPrefix(e,t){return 1===t.length?"全數":0===e?"首":e===t.length-1?"餘":"次"},formatNumber:e=>ke.format(e)}};const ve=(0,G.A)(me,[["render",he],["__scopeId","data-v-6c6e627b"]]);var be=ve;const Le=new Intl.NumberFormat;var ge={name:"TaxCalculator",data:()=>({taxYear1:"2024/25",taxYear2:"2025/26",showTaxPayerIndex:1,taxPayerResult:new Map,totalSiblings:0,totalSiblings18:0,totalDisabledSiblings:0}),computed:(0,I.A)((0,I.A)({},(0,$.aH)(["taxPayerMap","parentMap"])),(0,$.L8)(["parentsClaimedByTaxpayer"])),components:{taxpayer:ee,taxresult:be},created(){this.computeTax()},methods:(0,I.A)((0,I.A)({showTaxPayerModal(e){this.showTaxPayerIndex=e,this.$vfm.show("taxPayerModal")},disableModalMethod(){this.showTaxPayerIndex=NaN}},(0,$.PY)(["addParent","deleteParent","changeTaxPayerProp","changeParentProp"])),{},{addTaxPayer(){this.$store.commit("addTaxPayer"),isNaN(this.showTaxPayerIndex)&&(this.showTaxPayerIndex=this.taxPayerMap.keys().next().value,this.computeTax()),this.computeTax()},deleteTaxPayer(e){if(this.$store.commit("deleteTaxPayer",e),this.taxPayerResult.delete(e),e===this.showTaxPayerIndex){const e=this.taxPayerMap.keys().next();e.done?this.showTaxPayerIndex=NaN:(this.computeTax(),this.showTaxPayerIndex=e.value)}},computeTax(){const e=this.$store.getters.parentsClaimedByTaxpayer;for(const t of this.taxPayerMap.keys()){const a=E.taxPayable(this.taxPayerMap.get(t),e.get(t));this.taxPayerResult.set(t,a)}},showTaxResult(){this.computeTax(),this.$vfm.hide("taxPayerModal"),this.$vfm.show("taxResultModal")},setParentClaimedBy(e,t){this.$store.commit("setParentClaimedBy",{parentId:e,taxPayerId:t})},setParentLivingTogether(e,t,a){this.$store.commit("setParentLivingTogether",{parentId:t,taxPayerId:a,livingTogether:e.target.checked})},taxpayerOpenKeydownListener(e){"Enter"===e.key&&(document.activeElement.dispatchEvent(new Event("change")),this.showTaxResult())},taxresultOpenKeydownListener(e){"Backspace"===e.key&&(this.$vfm.hide("taxResultModal"),this.$vfm.show("taxPayerModal"))},taxpayerOpen(){this.$refs.taxpayer.$el.addEventListener("keydown",this.taxpayerOpenKeydownListener)},taxpayerClose(){this.$refs.taxpayer.$el.removeEventListener("keydown",this.taxpayerOpenKeydownListener)},taxresultOpen(){this.$refs.taxresult.$el.addEventListener("keydown",this.taxresultOpenKeydownListener)},taxresultClose(){this.$refs.taxresult.$el.removeEventListener("keydown",this.taxresultOpenKeydownListener)},formatNumber:e=>Le.format(e),autocalculate:V})};const ye=(0,G.A)(ge,[["render",_],["__scopeId","data-v-759e4593"]]);var fe=ye;class Pe{constructor(e){this.name=e,this.martialStatus=0,this.income=0,this.mpf=0,this.otherDeductionsThisYear=0,this.otherDeductionsNextYear=0,this.siblings=0,this.siblings18=0,this.disabledSiblings=0,this.children=0,this.children18=0,this.newbornChildrenThisYear=0,this.newbornChildrenNextYear=0,this.otherDisabledDependants=0,this.provisionalTax=0,this.disabledPerson=!1}}class we{constructor(e,t){this.name=e,this.age=1,this.livingTogether=new Map,this.claimedBy=t}}var Te=(0,$.y$)({state:{taxPayerMap:new Map([[1,new Pe("納稅人1")]]),taxPayerCounter:1,parentMap:new Map,parentCounter:0},getters:{parentsClaimedByTaxpayer(e){const t=new Map;for(const a of e.taxPayerMap.keys())t.set(a,[]);for(const[a,l]of e.parentMap){const e=t.get(l.claimedBy);e.push({id:a,name:l.name,age:l.age,livingTogether:l.livingTogether.get(l.claimedBy)}),t.set(l.claimedBy,e)}return t}},mutations:{addTaxPayer(e){e.taxPayerCounter++,e.taxPayerMap.set(e.taxPayerCounter,new Pe("納稅人".concat(e.taxPayerCounter)));const t=e.taxPayerMap.keys().next().value;for(const a of e.parentMap.values())void 0===a.claimedBy&&(a.claimedBy=t),a.livingTogether.set(e.taxPayerCounter,!1)},deleteTaxPayer(e,t){e.taxPayerMap.delete(t);const a=e.taxPayerMap.keys().next().value;for(const l of e.parentMap.values())l.claimedBy=a,l.livingTogether.delete(t)},changeTaxPayerProp(e,{i:t,prop:a,val:l}){e.taxPayerMap.get(t)[a]=l},addParent(e){const t=e.taxPayerMap.keys().next().value;e.parentCounter++;const a=new we("父母".concat(e.parentCounter),t);for(const l of e.taxPayerMap.keys())a.livingTogether.set(l,!1);e.parentMap.set(e.parentCounter,a)},deleteParent(e,t){e.parentMap.delete(t)},changeParentProp(e,{i:t,prop:a,val:l}){e.parentMap.get(t)[a]=l},setParentClaimedBy(e,{parentId:t,taxPayerId:a}){e.parentMap.get(t).claimedBy=a},setParentLivingTogether(e,{parentId:t,taxPayerId:a,livingTogether:l}){e.parentMap.get(t).livingTogether.set(a,l)}},actions:{},modules:{}});(0,l.Ef)(fe).use(Te).use((0,n.Ay)()).mount("#app")}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,r){if(!l){var o=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],r=e[d][2];for(var i=!0,s=0;s<l.length;s++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](l[s])}))?l.splice(s--,1):(i=!1,r<o&&(o=r));if(i){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[l,n,r]}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,r,o=l[0],i=l[1],s=l[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(s)var d=s(a)}for(t&&t(l);u<o.length;u++)r=o[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},l=self["webpackChunkhksalariestax"]=self["webpackChunkhksalariestax"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(8692)}));l=a.O(l)})();
//# sourceMappingURL=app.f1dd9284.js.map